---
# è¿™æ˜¯æ–‡ç« çš„æ ‡é¢˜
title: Vue.js
# ä½ å¯ä»¥è‡ªå®šä¹‰å°é¢å›¾ç‰‡
cover: /assets/images/background.jpg
# è¿™æ˜¯é¡µé¢çš„å›¾æ ‡
icon: file
# è¿™æ˜¯ä¾§è¾¹æ çš„é¡ºåº
order: 1
# è®¾ç½®ä½œè€…
author: XYin
# è®¾ç½®å†™ä½œæ—¶é—´
date: 2023-08-01
# ä¸€ä¸ªé¡µé¢å¯ä»¥æœ‰å¤šä¸ªåˆ†ç±»
category:
  - front-end
# ä¸€ä¸ªé¡µé¢å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾
tag:
  - vue3
  - notes
# æ­¤é¡µé¢ä¼šåœ¨æ–‡ç« åˆ—è¡¨ç½®é¡¶
sticky: true
# æ­¤é¡µé¢ä¼šå‡ºç°åœ¨æ–‡ç« æ”¶è—ä¸­
star: true

---

è¿™æ˜¯ä¸€ç¯‡å…³äº[`vue.js`](https://vuejs.org/)çš„å­¦ä¹ ç¬”è®°ã€‚
> è¿™ç¯‡æ–‡ç« å°†å…¨éƒ¨ä½¿ç”¨Vue3ï¼Œå¹¶æŒ‰ç…§Vueå®˜æ–¹æ¨èçš„ç»„åˆå¼APIå’Œsetupè¯­æ³•ç³–ğŸ¬è¿›è¡Œcoding

<!-- more -->

## 1. vue.jsç®€ä»‹

Vue (å‘éŸ³ä¸º /vjuË/ï¼Œç±»ä¼¼ view) æ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript æ¡†æ¶ã€‚å®ƒåŸºäºæ ‡å‡† HTMLã€CSS å’Œ JavaScript æ„å»ºï¼Œå¹¶æä¾›äº†ä¸€å¥—å£°æ˜å¼çš„ã€ç»„ä»¶åŒ–çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¸®åŠ©ä½ é«˜æ•ˆåœ°å¼€å‘ç”¨æˆ·ç•Œé¢ã€‚æ— è®ºæ˜¯ç®€å•è¿˜æ˜¯å¤æ‚çš„ç•Œé¢ï¼ŒVue éƒ½å¯ä»¥èƒœä»»ã€‚ç”±äºVue2å°†äº2023å¹´æœ«åœæ­¢ç»´æŠ¤ï¼Œæœ¬æ–‡ç« åªä»‹ç»Vue3ã€‚

::: tip Vueä¸React

- è™½ç„¶ä¸»æµçš„ä¸­å›½äº’è”ç½‘å¤§å‚ï¼ˆBATç­‰ï¼‰æ›´å¤šä½¿ç”¨[React](https://react.dev/)ï¼Œä½†Vueç­‰å­¦ä¹ æ›²çº¿æ›´ä½ï¼Œæ›´é€‚åˆä¸­å°è§„æ¨¡çš„å‰ç«¯å¼€å‘ï¼Œä¹Ÿæ›´é€‚åˆä¸­å›½å¼€å‘è€…å­¦ä¹ å’Œä½¿ç”¨ã€‚
- ç¾å›¢ã€å»å“ªå„¿ç­‰äº§å“çŸ©é˜µä½¿ç”¨äº†Vueè¿›è¡Œå¼€å‘ã€‚
:::

ä½¿ç”¨Vue3ç­‰æ¡†æ¶ä¹‹å‰ï¼Œéœ€è¦å¯¹HTML, CSS, JavaScriptå’ŒNode.jsæœ‰ä¸€å®šåŸºç¡€ã€‚åœ¨é¡¹ç›®çš„å®é™…å¼€å‘ä¸­ï¼Œè¿˜å»ºè®®ä½¿ç”¨Typescriptï¼Œå®ç°æ›´å¥½çš„ä»£ç è§„èŒƒå’Œä»£ç æç¤ºã€‚
å¼€å‘å’Œéƒ¨ç½²æ—¶ï¼Œè¿˜å¯èƒ½ä¼šç”¨åˆ°WebPackå’ŒViteç­‰æ‰“åŒ…æ„å»ºå·¥å…·ã€‚

## 2. å“åº”å¼å…¥é—¨

å…³äºVue.jsçš„å“åº”å¼ä¸åŒå‘æ•°æ®ç»‘å®šç­‰åŠŸèƒ½ï¼Œå®˜ç½‘æ–‡æ¡£å·²ç»æœ‰è¯¦ç»†çš„è§£é‡Šï¼Œæˆ‘ä»¬è¿›è¡Œç®€å•çš„å›é¡¾ï¼ˆè¯¦æƒ…è¯·ç§»æ­¥[å®˜ç½‘æ–‡æ¡£](https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html#ref)ï¼‰ã€‚

> å“åº”å¼(Reactive)æ˜¯ä¸€ä¸ªç¼–ç¨‹æ¦‚å¿µ,å®ƒå…è®¸æˆ‘ä»¬ä»¥å£°æ˜å¼çš„æ–¹å¼æ¥æ›´æ–°åº”ç”¨çš„çŠ¶æ€å’Œè§†å›¾ã€‚

::: tip å“åº”å¼ç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³

- åº”ç”¨çŠ¶æ€å­˜å‚¨åœ¨å“åº”å¼å˜é‡ä¸­ã€‚
- é€šè¿‡ä¿®æ”¹è¿™äº›å˜é‡è§¦å‘è§†å›¾çš„è‡ªåŠ¨æ›´æ–°ã€‚
- å“åº”å¼ç¼–ç¨‹ä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨æ“ä½œDOM,å¼€å‘è€…åªéœ€è¦å…³æ³¨çŠ¶æ€å˜åŒ–,è§†å›¾ä¼šè‡ªå‘æ›´æ–°ã€‚
:::

åœ¨Vue.jsä¸­,å“åº”å¼å…·ä½“å·¥ä½œåŸç†æ˜¯:

1. ä½¿ç”¨definePropertyæˆ–Proxyå°†æ•°æ®å¯¹è±¡è½¬æ¢æˆå“åº”å¼çš„ã€‚
2. è§†å›¾é€šè¿‡æ•°æ®ç»‘å®šè¿æ¥åˆ°è¿™äº›å“åº”å¼å˜é‡ä¸Šã€‚
3. å½“å˜é‡å˜åŒ–æ—¶,è§¦å‘`setter`æ›´æ–°è§†å›¾ã€‚

### å£°æ˜å“åº”å¼çŠ¶æ€

Vueæä¾›äº†ä¸¤ç§å£°æ˜å“åº”å¼çŠ¶æ€çš„æ–¹æ³•ï¼š`ref`å’Œ`reactive`ã€‚ç®€å•æ¥è¯´ï¼Œ`ref`ä¸€èˆ¬æ¥åˆ›å»ºåŸºæœ¬ç±»å‹æ•°æ®çš„å“åº”ï¼Œè€Œ`reactive`ç”¨æ¥åˆ›å»ºå¯¹è±¡ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼‰çš„å“åº”ã€‚
> refå’Œractiveéƒ½å¯ä»¥å®ç°æ·±å±‚å¯¹è±¡çš„å“åº”ã€‚

refå†…éƒ¨ä½¿ç”¨äº†Object.definePropertyçš„getter/setterï¼Œè€Œreactiveæ˜¯é€šè¿‡Proxyå®ç°å“åº”å¼çš„ã€‚
å½“å°è¯•ä½¿ç”¨refå®šä¹‰å¤æ‚å¯¹è±¡ç±»å‹æ—¶ï¼Œrefå†…éƒ¨ä¹Ÿä¼šåˆ©ç”¨å“åº”å¼Proxyä»£ç†ã€‚

### ä½¿ç”¨ref()

```typescript
import { ref } from 'vue'
const count = ref<number>(0)
```

- #### refçš„å·¥ä½œåŸç†

æ¨¡æ¿ä¸­ä½¿ç”¨äº†ä¸€ä¸ª refï¼Œç„¶åæ”¹å˜äº†è¿™ä¸ª ref çš„å€¼æ—¶ï¼ŒVue ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°è¿™ä¸ªå˜åŒ–ï¼Œå¹¶ä¸”ç›¸åº”åœ°æ›´æ–° DOMã€‚è¿™æ˜¯é€šè¿‡ä¸€ä¸ªåŸºäºä¾èµ–è¿½è¸ªçš„å“åº”å¼ç³»ç»Ÿå®ç°çš„ã€‚
åœ¨æ ‡å‡†çš„ JavaScript ä¸­ï¼Œæ£€æµ‹æ™®é€šå˜é‡çš„è®¿é—®æˆ–ä¿®æ”¹æ˜¯è¡Œä¸é€šçš„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ getter å’Œ setter æ–¹æ³•æ¥æ‹¦æˆªå¯¹è±¡å±æ€§çš„ get å’Œ set æ“ä½œã€‚
refçš„å®ç°å¯ä»¥ä»¥å¦‚ä¸‹ä»£ç ç±»æ¯”ï¼š

```typescript
// ä¼ªä»£ç ï¼Œä¸æ˜¯çœŸæ­£çš„å®ç°
const myRef = {
  _value: 0,
  get value() {
    track()
    return this._value
  },
  set value(newValue) {
    this._value = newValue
    trigger() // åœ¨æ›´æ”¹å€¼çš„æ—¶å€™trigger
  }
}
```

### refè¿›é˜¶Tips

::: info refè¿›é˜¶Tips

:::

1. ä½¿ç”¨[shallowRef](https://cn.vuejs.org/api/reactivity-advanced.html#shallowref)æ¥æ”¾å¼ƒæ·±å±‚å“åº”æ€§
2. DOMæ›´æ–°æ—¶æœºï¼šä¿®æ”¹äº†å“åº”å¼çŠ¶æ€æ—¶ï¼ŒDOMä¼šè‡ªåŠ¨è¢«æ›´æ–°ï¼Œä½†DOMçš„æ›´æ–°æ˜¯å¼‚æ­¥çš„ã€‚Vueä¼šåœ¨`next Tick`å‘¨æœŸæ›´æ–°çŠ¶æ€ï¼Œä»¥ç¡®ä¿ä¸ç®¡è¿›è¡Œäº†å¤šå°‘æ¬¡çŠ¶æ€ä¿®æ”¹ï¼Œæ¯ä¸ªç»„ä»¶éƒ½åªä¼šè¢«æ›´æ–°ä¸€æ¬¡ã€‚å¦‚æœè¦ç­‰å¾…DOMæ›´æ–°å®Œæˆæ‰æ‰§è¡Œé¢å¤–ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨[nextTick()](https://cn.vuejs.org/api/general.html#nexttick)å…¨å±€APIï¼š

    ```typescript
    import { nextTick } from 'vue'
    async function increment() {
      count.value++
      await nextTick()
      // ç°åœ¨ DOM å·²ç»æ›´æ–°äº†
    }
    ```

3. working on it...

### ä½¿ç”¨reactive()

`reactive()` å°†æ·±å±‚åœ°è½¬æ¢å¯¹è±¡ï¼šå½“è®¿é—®åµŒå¥—å¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢« `reactive()` åŒ…è£…ã€‚å½“ ref çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ`ref()` ä¹Ÿä¼šåœ¨å†…éƒ¨è°ƒç”¨å®ƒã€‚ä¸æµ…å±‚ ref ç±»ä¼¼ï¼Œä¹Ÿæœ‰ä¸€ä¸ª `shallowReactive()` API å¯ä»¥é€‰æ‹©é€€å‡ºæ·±å±‚å“åº”æ€§ã€‚

```typescript
import { reactive } from 'vue'
const state = reactive({ count: 0 })
```

ç”±äº`reactive()`å­˜åœ¨æŸäº›å±€é™æ€§ï¼Œ<u>**Vueå®˜æ–¹å»ºè®®ä½¿ç”¨ `ref()` ä½œä¸ºå£°æ˜å“åº”å¼çŠ¶æ€çš„ä¸»è¦ API**</u>ï¼š

::: warning  reactive() çš„å±€é™æ€§

1. æœ‰é™çš„å€¼ç±»å‹ã€‚
2. ä¸èƒ½æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼ˆå“åº”æ€§é“¾æ¥ä¸¢å¤±ï¼‰
3. å¯¹è§£æ„æ“ä½œä¸å‹å¥½ã€‚

:::

### è¡¥å……

1. é¢å¤–çš„refè§£åŒ…ç»†èŠ‚ï¼ˆè¯¦æƒ…è§[å®˜ç½‘æ–‡æ¡£](https://cn.vuejs.org/guide/essentials/reactivity-fundamentals.html#ref-unwrapping-as-reactive-object-property)ï¼‰
2. working on it...

## 3. ç»„ä»¶ä¸ç»„ä»¶é—´é€šä¿¡